<!DOCTYPE html>
<html lang="en">
<!-- Begin Head -->

<head>
    <title>RidePal - Online PlaylistGenerator</title>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta name="description" content="Music">
    <meta name="keywords" content="">
    <meta name="author" content="kamleshyadav">
    <meta name="MobileOptimized" content="320">
    <!--Start Style -->
    <link rel="stylesheet" type="text/css" href="~/css/fonts.css">
    <link rel="stylesheet" type="text/css" href="~/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="~/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="~/js/plugins/swiper/css/swiper.min.css">
    <link rel="stylesheet" type="text/css" href="~/js/plugins/nice_select/nice-select.css">
    <link rel="stylesheet" type="text/css" href="~/js/plugins/player/volume.css">
    <link rel="stylesheet" type="text/css" href="~/js/plugins/scroll/jquery.mCustomScrollbar.css">
    <link rel="stylesheet" type="text/css" href="~/css/style.css">
    <link rel="stylesheet" type="text/css" href="~/css/site.css">
    <!-- Favicon Link -->
    <link rel="shortcut icon" type="image/png" href="~/images/logo.png">
    <!-- Please do not move those scripts from here its breaking the DZ player logic-->
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js"></script>
    <script type="text/javascript" src="~/js/DeezPlayer.js"></script>
</head>
<body>
    <!----Loader Start---->
    <div class="ms_loader">
        <div class="wrap">
            <img src="~/Images/loader.gif" alt="">
        </div>
    </div>
    <!----Main Wrapper Start---->
    <div class="ms_main_wrapper">
        <!---Side Menu Start--->
        <div class="ms_sidemenu_wrapper">
            <div class="ms_nav_close">
                <i class="fa fa-angle-right" aria-hidden="true"></i>
            </div>
            <div class="ms_sidemenu_inner">
                <div class="ms_logo_inner">
                    <div class="ms_logo">
                        <a asp-action="Index" asp-controller="Home"><img src="~/Images/logo.png" alt="" class="img-fluid" /></a>
                    </div>
                    <div class="ms_logo_open">
                        <a asp-action="Index" asp-controller="Home"><img src="~/Images/logo.png" alt="" class="img-fluid" style="max-width: 80%;" /></a>
                    </div>
                </div>
                <div class="ms_nav_wrapper">
                    <ul>
                        <li>
                            <a asp-action="Index" asp-controller="Home" class="active" title="Discover">
                                <span class="nav_icon">
                                    <span class="icon icon_discover"></span>
                                </span>
                                <span class="nav_text">
                                    discover
                                </span>
                            </a>
                        </li>
                        <li>
                            <a asp-action="CreatePlaylist" asp-controller="Playlist" title="Create Playlist">
                                <span class="nav_icon">
                                    <span class="icon icon_c_playlist"></span>
                                </span>
                                <span class="nav_text">
                                    create playlist
                                </span>
                            </a>
                        </li>
                        <li>
                            <a asp-action="MyPlaylists" asp-controller="Playlist" title="My playlists">
                                <span class="nav_icon">
                                    <span class="icon icon_fe_playlist"></span>
                                </span>
                                <span class="nav_text">
                                    My playlists
                                </span>
                            </a>
                        </li>
                        <li>
                            <a asp-controller="Playlist" asp-action="Playlists">
                                <span class="nav_icon">
                                    <span class="icon icon_albums"></span>
                                </span>
                                <span class="nav_text">
                                    Playlists
                                </span>
                            </a>
                        </li>
                        <li>
                            <a asp-controller="Artists" asp-action="Index" title="Artists">
                                <span class="nav_icon">
                                    <span class="icon icon_artists"></span>
                                </span>
                                <span class="nav_text">
                                    Artists
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="#" id="genres" title="Genres">
                                <span class="nav_icon">
                                    <span class="icon icon_genres"></span>
                                </span>
                                <span class="nav_text">
                                    Genres
                                </span>
                            </a>
                        </li>
                        <li>
                            <a asp-controller="Home" asp-action="Tracks" title="Top Tracks">
                                <span class="nav_icon">
                                    <span class="icon icon_tracks"></span>
                                </span>
                                <span class="nav_text">
                                    Top tracks
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="https://localhost:5000/swagger/index.html" title="Swagger">
                                <span class="nav_icon">
                                    <span class="icon icon_station"></span>
                                </span>
                                <span class="nav_text">
                                    Swagger
                                </span>
                            </a>
                        </li>
                    </ul>
                    <ul class="nav_downloads">

                        <li>
                            <a asp-controller="User" asp-action="AllUsers" title="Users">
                                <span class="nav_icon">
                                    <span class="icon icon_history"></span>
                                </span>
                                <span class="nav_text">
                                    Users
                                </span>
                            </a>
                        </li>
                        <li>
                            <a asp-controller="User" asp-action="FriendRequests" asp-route-email="@this.User.Identity.Name" title="Friends Requests">
                                <span class="nav_icon">
                                    <span class="icon icon_favourite"></span>
                                </span>
                                <span class="nav_text">
                                    Friend Requests
                                </span>
                            </a>
                        </li>
                        <li>
                            <a asp-action="About" asp-controller="Home" title="About">
                                <span class="nav_icon">
                                    <span class="icon icon_download"></span>
                                </span>
                                <span class="nav_text">
                                    About
                                </span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!---Main Content Start--->
    <div class="ms_content_wrapper padder_top80">
        <!---Header--->
        <div class="ms_header">
            <div class="ms_top_left">
                <div class="ms_top_search">
                    <form asp-controller="Search" asp-action="Index" method="get">
                        @{
                            if (this.ViewData["search"] != null)
                            {
                                <input type="text" name="name" class="form-control" value="@this.ViewData["search"]">
                            }
                            else
                            {
                                <input type="text" name="name" class="form-control" placeholder="Search Music Here..">
                            }

                        }
                    </form>
                    <span class="search_icon">
                        <img src="~/Images/svg/search.svg" alt="">
                    </span>
                </div>
                
            </div>
            <div class="ms_top_right">
                @if (!this.User.Identity.IsAuthenticated)
                {
                    <div class="ms_top_btn">
                        <a class="ms_btn login_btn" asp-action="Login" asp-controller="Auth"><span>Sign In</span></a>
                        <a class="ms_btn reg_btn" asp-action="Register" asp-controller="Auth"><span>Sign Up</span></a>
                    </div>
                }

                else
                {
                    <div class="ms_top_btn">
                        <div class="ms_top_btn">
                            @*use this link to redirect user to login with deezer*@
                            <a asp-action="LoginWithDeezer" asp-controller="Auth" class="ms_btn ms_upload_btn" style="margin-right: 15px; max-width:90px ">Deezer</a>
                            <a class="ms_admin_name">
                                <span class="hello-bella-hide">Hello @this.User.Claims.FirstOrDefault(x => x.Type == "Username").Value</span><img class="ms_pro_name" src="@this.User.Claims.FirstOrDefault(x=>x.Type=="Image").Value" />
                            </a>
                        </div>
                        <ul class="pro_dropdown_menu">
                            <li><a asp-controller="User" asp-action="Index" asp-route-email="@this.User.Identity.Name">Profile</a></li>
                            <li><a asp-controller="User" asp-action="Update" asp-route-email="@this.User.Identity.Name">Settings</a></li>
                            <li><a asp-controller="Auth" asp-action="Logout">Sign Out</a></li>
                        </ul>
                    </div>
                }
            </div>
        </div>
        @*<div id="myModal1" class="modal  centered-modal" role="dialog">
            <form id="loginModal" asp-action="LoginModal" asp-controller="Auth" data-ajax="true" data-ajax-method="POST"
                  data-ajax-success="FormError">
                <div class="modal-dialog login_dialog">
                    <!-- Modal content-->
                    <div class="modal-content">
                        <button type="button" class="close" data-dismiss="modal">
                            <i class="fa_icon form_close"></i>
                        </button>
                        <div class="modal-body">
                            @{
                                await Html.RenderPartialAsync("_LoginPartial", new RidePal.WEB.Models.LoginViewModel());
                            }
                        </div>

                    </div>

                </div>
            </form>
        </div>
        <div id="SignUp" class="modal"></div>
        <div id="myModal2" class="modal  centered-modal" role="dialog">
            <form id="registerModal" asp-action="RegisterModal" asp-controller="Auth" data-ajax="true" data-ajax-method="POST"
                  data-ajax-success="FormError2">
                <div class="modal-dialog register_dialog">
                    <!-- Modal content-->
                    <div class="modal-content">
                        <button type="button" class="close" data-dismiss="modal">
                            <i class="fa_icon form_close"></i>
                        </button>
                        <div class="modal-body">
                            @{
                                await Html.RenderPartialAsync("_RegisterPartial", new RidePal.Web.Models.CreateUserViewModel());
                            }
                        </div>
                    </div>
                </div>
            </form>
        </div>
        <div id="SignUp" class="modal"></div>*@
    </div>
    @RenderBody()
    @*<script>
        function FormError(result) {
            debugger;
            if (result.includes("<!DOCTYPE html>")) {
                $("myModal1").hide();
                window.location.href="/";
                return;
            }
            $("#validation-error span").remove();
            $("#validation-error").append(`<span class="error-msg">${result}</span>`);
            let div = document.getElementById("validation-error");
            let element = div.getAttribute("hidden");
            div.removeAttribute(element);
        }
        function FormError2(result) {
            debugger;
            if (result.includes("<!DOCTYPE html>")) {
                $("myModal2").hide();
                window.location.href="Auth/ReturnConfirmEmailView";
                return;
            }
            $("#validation-error2 span").remove();
            $("#validation-error2").append(`<span class="error-msg2">${result}</span>`);
            let div = document.getElementById("validation-error2");
            let element = div.getAttribute("hidden");
            div.removeAttribute(element);
        }
    </script>*@
    <!--Main js file Style-->
    @*<script type="text/javascript" src="~/js/jquery.min.js"></script>*@
    <script type="text/javascript" src="~/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="~/js/plugins/swiper/js/swiper.min.js"></script>
    <script type="text/javascript" src="~/js/plugins/player/jplayer.playlist.min.js"></script>
    <script type="text/javascript" src="~/js/plugins/player/jquery.jplayer.min.js"></script>
    <script type="text/javascript" src="~/js/plugins/player/audio-player.js"></script>
    <script type="text/javascript" src="~/js/plugins/player/volume.js"></script>
    <script type="text/javascript" src="~/js/plugins/nice_select/jquery.nice-select.min.js"></script>
    <script type="text/javascript" src="~/js/plugins/scroll/jquery.mCustomScrollbar.js"></script>
    <script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="~/lib/jquery-unobtrusive/jquery.unobtrusive-ajax.js"></script>
    <script src="~/lib//jquery-validation-unobtrusive//jquery.validate.unobtrusive.min.js"></script>
    <script type="text/javascript" src="~/js/site.js"></script>
    <script type="text/javascript" src="~/js/custom.js"></script>
    <script>

        $("#genres").click(function () {
            var currLoc = $(location).attr('href');
            var targetLoc = "https://localhost:5000/"
            if (currLoc == targetLoc) {

                $('html,body').animate({
                    scrollTop: $("#topGenres").offset().top
                },
                    'slow');
            }
            else {

                $(location).attr('href', targetLoc)
            }

        });


    </script>
</body>
</html>